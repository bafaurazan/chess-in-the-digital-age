regex = "-\\s*(.*?)\\s*[.]"))[,2]
my_month_names = month.abb[as.integer(month_from_imported_links)]
head(data.frame(full_date_from_imported_links))
my_paths <- paste("D:/moje/projekty/chess-in-the-digital-age/Dataset/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(links_for_download)
head(my_paths)
my_path <- "D:/moje/projekty/chess-in-the-digital-age/Dataset/2024/04. April/lichess_db_standard_rated_2024-04.pgn.zst.torrent"
my_url = "https://database.lichess.org/standard/lichess_db_standard_rated_2024-04.pgn.zst.torrent"
my_path <- "D:/moje/projekty/chess-in-the-digital-age/Dataset/2024/04. April/lichess_db_standard_rated_2024-04.pgn.zst.torrent"
download.file(my_url, my_path, mode="wb")
my_paths = data.frame(seq(2,nrow(dflink), by=2), my_path)
project_path = "D:\\moje\\projekty\\chess-in-the-digital-age"
project_path
knitr::opts_chunk$set(root= paste(project_path,"\\presentation", sep = ""))
setwd(paste(project_path,"\\presentation", sep = ""))
Dataset_path = paste(project_path,"\\Dataset", sep = "")
getwd()
Dataset_path
Dataset_path = paste(project_path,"/Dataset", sep = "")
project_path = "D:/moje/projekty/chess-in-the-digital-age"
Dataset_path
project_path = "D:/moje/projekty/chess-in-the-digital-age"
project_path
Dataset_path = paste(project_path,"/Dataset", sep = "")
Dataset_path
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
my_paths[1:2]
links_for_download[1:2]
head(links_for_download)
View(links_for_download)
links_for_download[1:2,]
my_paths[1:2]
test_download = links_for_download[1:2,]
test_path = my_paths[1:2]
test_download
test_path
download.file(test_download, test_path, mode="wb")
dir.create(test_path)
?dir.create
test_path = my_paths[1:2]
(test_path = my_paths[1:2])
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
(test_path = my_paths[1:2])
dir.create(test_path)
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/", sep="")
(test_path = my_paths[1:2])
dir.create(test_path)
(test_path = my_paths[1])
dir.create(test_path)
download.file(test_download, test_path, mode="wb")
(test_path = my_paths[2])
dir.create(test_path)
(test_path = my_paths[1:2])
download.file(test_download, test_path, mode="wb")
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
(test_path = my_paths[1:2])
download.file(test_download, test_path, mode="wb")
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths)
file_names <- paste("/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
head(file_names)
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths)
#### Definiowanie nazw plików które będą pobrane
```{r}
file_names <- paste("/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(file_names)
file_names <- paste("lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(file_names)
test_download = links_for_download[1:2,]
(test_download = links_for_download[1:2,])
(test_path = my_paths[1:2])
(test_path = my_paths[1])
dir.create(test_path)
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
(test_download = links_for_download[1:2,])
(test_path = my_paths[1:2])
download.file(test_download, test_path, mode="wb")
(test_path = my_paths[2])
dir.create(test_path)
my_paths <- paste(Dataset_path,"/",year_from_imported_links, sep="")
(test_path = my_paths[2])
my_paths
head(file_names)
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths)
head(data.frame(full_date_from_imported_links))
head(my_month_names)
my_url = "https://database.lichess.org/standard/lichess_db_standard_rated_2024-04.pgn.zst.torrent"
my_path <- "D:/moje/projekty/chess-in-the-digital-age/Dataset/2024/04. April/lichess_db_standard_rated_2024-04.pgn.zst.torrent"
download.file(my_url, my_path, mode="wb")
(test_path = my_paths[2])
my_paths <- paste(Dataset_path,"/",year_from_imported_links, sep="")
(test_path = my_paths[2])
dir.create(test_path)
my_paths_to_download = paste(my_paths,file_names,sep="")
my_paths_to_download
my_paths <- paste(Dataset_path,"/",year_from_imported_links, sep="")
my_paths
my_paths <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths
my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths)
my_paths <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths
my_paths <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
head(my_paths)
(my_paths)
length(my_paths)
my_paths
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
i = 2
my_paths_year[i]
for(i in length(my_paths_year)){
dir.create(my_paths_year[i])
}
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
create_folders_year()
create_folders_year()
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
file_names <- paste("lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(file_names)
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links, sep="")
my_paths_month
head(my_paths_month)
tail(my_paths_month)
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links, sep="")
create_folders_year()
create_folders_month()
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
create_folders_year()
create_folders_month()
# my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
create_folders_year()
create_folders_month()
# my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
create_folders_year()
create_folders_month()
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
create_folders_year()
create_folders_month()
file_names <- paste("lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(file_names)
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
download.file(links_for_download, my_paths, mode="wb")
links_for_download = data.frame(links[seq(2,nrow(links), by=2), 1])
head(links_for_download)
download.file(links_for_download, my_paths, mode="wb")
links_for_download = links[seq(2,nrow(links), by=2), 1]
head(links_for_download)
download.file(links_for_download, my_paths, mode="wb")
download.file(links_for_download[1:2], my_paths[1:2], mode="wb")
download.file(links_for_download[1:4], my_paths[1:4], mode="wb")
download.file(links_for_download[1:136], my_paths[1:136], mode="wb")
download.file(links_for_download[1:20], my_paths[1:20], mode="wb")
create_folders_year()
create_folders_month()
download.file(links_for_download[1:20], my_paths[1:20], mode="wb")
download.file(links_for_download[5], my_paths[5], mode="wb")
for(j in 1:length(my_paths)){
download.file(links_for_download[j], my_paths[j], mode="wb")
}
create_folders_year()
create_folders_month()
downloading()
downloading = function(){
for(j in 1:length(my_paths)){
download.file(links_for_download[j], my_paths[j], mode="wb")
}
}
download.file(links_for_download[136], my_paths[136], mode="wb")
download.file(links_for_download[133], my_paths[133], mode="wb")
create_folders_year()
create_folders_month()
downloading()
?download.file
downloading = function(){
for(j in 1:(length(my_paths))/2){
download.file(links_for_download[j], my_paths[j], mode="wb")
download.file(links_for_download[j+length(my_paths)/2], my_paths[j+length(my_paths)/2], mode="wb")
}
}
create_folders_year()
create_folders_month()
downloading()
downloading()
links_for_download = links[seq(2,nrow(links), by=2), 1]
head(links_for_download)
downloading()
for(j in 1:length(my_paths){
downloading = function(){
downloading = function(){
for(j in 1:(length(my_paths)/2)){
download.file(links_for_download[j], my_paths[j], mode="wb")
# download.file(links_for_download[j+length(my_paths)/2], my_paths[j+length(my_paths)/2], mode="wb")
}
}
downloading = function(){
for(j in 1:(length(my_paths)/2)){
download.file(links_for_download[j], my_paths[j], mode="wb")
download.file(links_for_download[j+length(my_paths)/2], my_paths[j+length(my_paths)/2], mode="wb")
}
}
downloading()
downloading = function(){
for(j in 1:(length(my_paths)/2)){
download.file(links_for_download[j], my_paths[j], mode="wb")
# download.file(links_for_download[j+length(my_paths)/2], my_paths[j+length(my_paths)/2], mode="wb")
}
}
downloading()
downloading = function(){
for(j in 1:length(my_paths)){
download.file(links_for_download[j], my_paths[j], mode="wb")
# download.file(links_for_download[j+length(my_paths)/2], my_paths[j+length(my_paths)/2], mode="wb")
}
}
downloading()
downloading = function(){
for(j in 1:length(my_paths)){
download.file(links_for_download[j], my_paths[j], mode="wb")
}
}
downloading()
rm(list=ls())
rm(list=ls())
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
library(rvest)
library(stringi)
url = "https://database.lichess.org"
path= "/html/body/div/div[2]/div/section[1]/table"
wezel = html_node(read_html(url), xpath=path)
hyperlinks = html_nodes(wezel, "a")
head(hyperlinks)
my_href = html_attr(hyperlinks, "href")
head(my_href)
links = data.frame(paste(url,my_href,sep="/"))
head(links)
links_for_download = links[seq(2,nrow(links), by=2), 1]
head(links_for_download)
full_date_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[.]"))[,2]
head(data.frame(full_date_from_imported_links))
year_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[-]"))[,2]
head(year_from_imported_links)
month_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "-\\s*(.*?)\\s*[.]"))[,2]
head(month_from_imported_links)
my_month_names = month.abb[as.integer(month_from_imported_links)]
head(my_month_names)
# my_paths <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
downloading = function(){
for(j in 1:length(my_paths)){
download.file(links_for_download[j], my_paths[j], mode="wb")
}
}
?download.file
create_folders_year()
create_folders_month()
downloading()
rm(list=ls())
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
library(rvest)
library(stringi)
url = "https://database.lichess.org"
path= "/html/body/div/div[2]/div/section[1]/table"
wezel = html_node(read_html(url), xpath=path)
hyperlinks = html_nodes(wezel, "a")
head(hyperlinks)
my_href = html_attr(hyperlinks, "href")
head(my_href)
links = data.frame(paste(url,my_href,sep="/"))
head(links)
links_for_download = data.frame(links[seq(2,nrow(links), by=2), 1])
head(links_for_download)
full_date_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[.]"))[,2]
head(data.frame(full_date_from_imported_links))
year_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[-]"))[,2]
head(year_from_imported_links)
month_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "-\\s*(.*?)\\s*[.]"))[,2]
head(month_from_imported_links)
my_month_names = month.abb[as.integer(month_from_imported_links)]
head(my_month_names)
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
downloading = function(){
create_folders_year()
create_folders_month()
for(j in 1:length(my_paths)){
download.file(links_for_download[j,], my_paths[j], mode="wb",Sys.sleep(0.2))
}
}
downloading()
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
year_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[-]"))[,2]
library(rvest)
library(stringi)
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
library(rvest)
library(stringi)
url = "https://database.lichess.org"
path= "/html/body/div/div[2]/div/section[1]/table"
wezel = html_node(read_html(url), xpath=path)
hyperlinks = html_nodes(wezel, "a")
head(hyperlinks)
my_href = html_attr(hyperlinks, "href")
head(my_href)
links = data.frame(paste(url,my_href,sep="/"))
head(links)
links_for_download = data.frame(links[seq(2,nrow(links), by=2), 1])
head(links_for_download)
full_date_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[.]"))[,2]
head(data.frame(full_date_from_imported_links))
year_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[-]"))[,2]
head(year_from_imported_links)
month_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "-\\s*(.*?)\\s*[.]"))[,2]
head(month_from_imported_links)
my_month_names = month.abb[as.integer(month_from_imported_links)]
head(my_month_names)
my_paths_year <- unique(paste(Dataset_path,"/",year_from_imported_links, sep=""))
my_paths_year
create_folders_year = function(){
for(i in 1:length(my_paths_year)){
dir.create(my_paths_year[i])
}
}
my_paths_month <- paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names, sep="")
head(my_paths_month)
tail(my_paths_month)
create_folders_month = function(){
for(i in 1:length(my_paths_month)){
dir.create(my_paths_month[i])
}
}
my_paths = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn.zst.torrent", sep="")
head(my_paths)
downloading = function(){
create_folders_year()
create_folders_month()
for(j in 1:length(my_paths)){
download.file(links_for_download[j,], my_paths[j], mode="wb",Sys.sleep(0.2))
}
}
year_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[-]"))[,2]
head(year_from_imported_links)
month_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "-\\s*(.*?)\\s*[.]"))[,2]
head(month_from_imported_links)
my_month_names = month.abb[as.integer(month_from_imported_links)]
head(my_month_names)
full_date_from_imported_links = data.frame(stri_match_all(links_for_download,
regex = "rated_\\s*(.*?)\\s*[.]"))[,2]
head(data.frame(full_date_from_imported_links))
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/presentation", sep = ""))
setwd(paste(project_path,"/presentation", sep = ""))
Dataset_path = paste(project_path,"/Dataset", sep = "")
mtcars |>
head()
mtcars |> head()
mtcars => head()
head(links)
head(links_for_download)
head(data.frame(full_date_from_imported_links))
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/log", sep = ""))
project_path = "D:/moje/projekty/chess-in-the-digital-age"
knitr::opts_chunk$set(root= paste(project_path,"/log", sep = ""))
setwd(paste(project_path,"/log", sep = ""))
head(links_for_download)
head(my_paths)
head(my_paths_month)
pgn_file_to_read = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn", sep="")
head(pgn_file_to_read)
pgn_file_to_read = paste(Dataset_path,"/",year_from_imported_links,"/",month_from_imported_links,". ",my_month_names,"/lichess_db_standard_rated_",full_date_from_imported_links,".pgn", sep="")[1]
head(pgn_file_to_read)
pgn <- read.table(pgn_file_to_read,
quote="", sep="\n", stringsAsFactors=FALSE, nrows = 18000)
View(pgn)
pgn <- read.table(pgn_file_to_read,
quote="", sep="\n", stringsAsFactors=FALSE)
rm(list=ls())
